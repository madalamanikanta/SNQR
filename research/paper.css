/* ====== Theme vars ====== */
:root{
  --snqr-border: rgba(255,255,255,.12);
  --snqr-accent-1: #8ad0ff;
  --snqr-accent-2: #6aa0ff;

  /* dynamic sticky top is set by JS => total fixed headers height */
  --sticky-top: 72px;
  --progress-h: 3px; /* top progress bar height */
}

/* ====== Layout grid ====== */
.paper-grid{
  display:grid;
  grid-template-columns: 420px minmax(0,1fr);
  gap:16px;
  padding:12px 16px 24px;
}
.legacy-left{ display:flex; flex-direction:column; gap:16px }

/* ====== HERO (left) ====== */
.paper-hero{ display:grid; grid-template-columns:1fr; gap:12px; padding:16px }
.paper-hero__media{ border-radius:16px; aspect-ratio:22/14; background:#0b1a26 center/cover no-repeat }
.paper-hero__body{ display:flex; flex-direction:column; gap:.6rem }
.paper-kicker{ font-size:.85rem; letter-spacing:.16em; color:#b9b9c8 }
.paper-title{ font-size:clamp(1.6rem,3.6vw,2.2rem) }
.paper-deck{ color:#cfd4dc }
.paper-meta{ display:flex; flex-wrap:wrap; gap:.6rem .9rem; color:#b9b9c8 }
.paper-meta .badge{ background:rgba(255,255,255,.08); border:1px solid var(--snqr-border); border-radius:999px; padding:.15rem .55rem }
.paper-details{ display:flex; flex-wrap:wrap; gap:.6rem; color:#b9b9c8 }
.paper-details .pill{ display:inline-flex; gap:.35rem; padding:.15rem .55rem; border:1px solid var(--snqr-border); border-radius:700px; background:rgba(255,255,255,.06) }
.paper-actions{ display:flex; gap:10px; margin-top:.35rem }
.heart{ width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:999px; border:1px solid var(--snqr-border); background:rgba(0,0,0,.35) }
.heart svg{ width:18px; height:18px; fill:none; stroke:#fff; stroke-width:1.6 }
.heart.is-active{ background:linear-gradient(180deg,var(--snqr-accent-1),var(--snqr-accent-2)) }
.heart.is-active svg{ fill:#fff; stroke:#fff }

/* ====== Latest Research (left) ====== */
.latest-desktop{ display:block }
.latest-mobile{ display:none; margin:8px 16px 0 }
.ticker{ position:relative; overflow:hidden; height:420px; border:1px solid var(--snqr-border); border-radius:16px; background:rgba(255,255,255,.03) }
.latest-cards{ position:absolute; inset:0; padding:10px; will-change:transform }
.latest-card{
  display:grid; grid-template-columns:1fr; gap:6px;
  padding:12px 14px; border-radius:16px; border:1px solid var(--snqr-border);
  background:rgba(255,255,255,.04); margin-bottom:10px;
}
.latest-card__title>a{ font-weight:700; color:#e6e9f0; text-decoration:none }
.latest-card__title>a:hover{ text-decoration:underline }
.latest-card__meta{ color:#cfd4dc; font-size:.9rem; display:flex; gap:10px; align-items:center; flex-wrap:wrap }
.pill{ padding:.2rem .6rem; border-radius:999px; border:1px solid var(--snqr-border); background:rgba(255,255,255,.06); font-size:.8rem }

/* ====== Right column ====== */
.right-canvas{ padding:12px 14px 18px }

/* Key Takeaways */
.kt--full{ margin-bottom:14px; padding:16px 18px; border:1px solid var(--snqr-border); border-radius:16px; background:rgba(255,255,255,.04) }
.kt__title{ margin:.1rem 0 .6rem; font-size: clamp(1.1rem,2vw,1.4rem) }
.kt__title span{ color: var(--snqr-accent-1) }
.kt__list{ margin:0; padding-left:1.2rem; display:grid; gap:.6rem }
.kt__list li{ line-height:1.5; list-style: disc }

/* CTA cards */
.cta-stack{ display:grid; grid-template-columns:1fr; gap:12px; margin:14px 0 }
.cta-card{ display:flex; align-items:center; gap:14px; padding:18px 20px; border-radius:18px; border:1px solid var(--snqr-border); color:#fff; font-weight:800; letter-spacing:.2px; cursor:pointer }
.cta-card i{ font-size:1.15rem }
.cta-reader{ background:linear-gradient(135deg, rgba(0,184,255,.16), rgba(0,80,255,.10)) }
.cta-audio{  background:linear-gradient(135deg, rgba(180,0,255,.18), rgba(90,0,180,.12)) }
.cta-summary{ background:linear-gradient(135deg, rgba(255,140,0,.16), rgba(180,90,0,.12)) }

/* ====== Summary (INLINE for all screens) ====== */
.summary{ margin-top:4px }
.slides-stack{
  display:grid; gap:12px; margin:0 auto;
  width:100%; max-width:min(1200px, 100vw); /* never cross screen */
}
.slide-canvas, .slide-img{
  display:block; width:100%; height:auto; max-width:100%;
  border:1px solid var(--snqr-border); border-radius:12px; background:#0e1622;
  box-shadow:0 6px 18px rgba(0,0,0,.28);
  image-rendering:-webkit-optimize-contrast; image-rendering:crisp-edges;
}

/* Hide old Summary overlay (not used) */
#summaryCanvas{ display:none !important }

/* ====== Division row ====== */
.division-row{ padding:10px 16px 26px; margin-top:12px }
.division-row__head{ display:flex; gap:10px; align-items:center; justify-content:flex-end }
.division-scroller{ margin-top:10px; display:flex; gap:12px; overflow:auto hidden; padding-bottom:4px; scroll-snap-type:x proximity }
.division-card{ min-width:280px; max-width:320px; scroll-snap-align:center; border:1px solid var(--snqr-border); border-radius:14px; overflow:hidden; background:rgba(255,255,255,.03) }
.division-card__media{ height:140px; background:#0e1220 center/cover no-repeat }
.division-card__body{ padding:10px 12px }
.division-card__title{ font-weight:700; margin:0 0 .25rem }

/* ====== Reader overlay (unchanged) ====== */
.reader-canvas{ position:fixed; inset:0; display:none }
.reader-canvas.is-open{ display:block }
.reader-scrim{ position:absolute; inset:0; background:rgba(6,10,18,.9); backdrop-filter:blur(6px) }
.reader-panel{ position:relative; z-index:2; display:flex; flex-direction:column; height:100vh }
.reader-bar{ height:44px; display:flex; align-items:center; gap:8px; padding:0 10px; border-bottom:1px solid var(--snqr-border); background:rgba(20,22,30,.7); backdrop-filter:blur(6px) }
.reader-title{ font-weight:700 }
.reader-spacer{ flex:1 }
.icon-btn{ display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px; border:1px solid var(--snqr-border); border-radius:10px; background:transparent; color:#fff }
.flip-wrap{ display:grid; place-items:center; height:calc(100vh - 44px); padding:0 }
.flip-container{ width:100vw; height:calc(100vh - 44px); border:0; border-radius:0; background:#0c1622; overflow:hidden; position:relative }
.flip-loading{ position:absolute; inset:0; display:grid; place-items:center; color:#cfd4dc }

/* ====== Audio dock (unchanged) ====== */
.audio-dock{
  position:fixed; right:16px; bottom:16px; z-index:60;
  display:flex; gap:10px; align-items:center;
  width:min(420px, 92vw); padding:10px 12px; border:1px solid var(--snqr-border);
  border-radius:16px; background:rgba(20,22,30,.85); backdrop-filter:blur(6px); color:#fff;
  box-shadow:0 10px 28px rgba(0,0,0,.45);
}
.audio-dock[hidden]{ display:none }
.audio-dock__cover{ width:56px; height:56px; border-radius:10px; object-fit:cover; background:#0d1420 }
.audio-dock__meta{ flex:1; display:grid; gap:6px }
.audio-dock__title{ font-weight:700; font-size:.95rem; line-height:1.2 }
.audio-dock__bar{ display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:8px }
#audioSeek{ -webkit-appearance:none; appearance:none; height:4px; border-radius:999px; background:#4a4f66 }
#audioSeek::-webkit-slider-thumb{ -webkit-appearance:none; width:12px; height:12px; border-radius:50%; background:#fff; border:1px solid #111 }

/* ====== Sticky left (desktop): releases at Division ====== */
@media (min-width:1181px){
  .legacy-left{ position:sticky; top:var(--sticky-top, 72px); align-self:start }
  .legacy-left.unstick{ position:static }
}

/* ====== Fixed headers helpers ====== */
.page-progress{
  position:fixed; inset:auto 0 auto 0; top:0;
  height:var(--progress-h); width:0%;
  background: linear-gradient(90deg, var(--snqr-accent-1), var(--snqr-accent-2));
  z-index:1200; pointer-events:none;
}
.scroll-header-fixed{ position:fixed; left:0; right:0; z-index:1190 }
.site-header-fixed{ position:fixed; left:0; right:0; z-index:1180 }

/* ====== Responsive ====== */
@media (max-width:1180px){
  .paper-grid{ grid-template-columns:1fr }
  .latest-desktop{ display:none }
  .latest-mobile{ display:block }
}
@media (max-width:760px){
  .paper-title{ font-size:clamp(1.4rem,6vw,1.9rem) }
}

/* =========================================================
   Paper page â€” Articles box sizing (desktop-first)
   ========================================================= */

/* Control knobs */
.paper-articles { 
  --paper-articles-h: 100px;     /* overall target height on desktop */
  --article-row-h: 100px;         /* each article row height */
}

/* Left parent card height */
.paper-articles__parent { 
  min-height: var(--paper-articles-h);
  display: flex;
  flex-direction: column;
}
.paper-articles__parent .card__media {
  /* keep media prominent; allow image to breathe */
  height: 80%;
  min-height: 90px;
  background-size: cover; 
  background-position: center;
}
.paper-articles__parent .card__body { padding: 12px 14px; }
.paper-articles__parent .card__footer { margin-top: auto; padding: 10px 14px 14px; }

/* Right list box height matches left */
.paper-articles__listbox { min-height: var(--paper-articles-h); }

/* Show exactly 4 articles without scrolling; scroll for more */
.paper-articles__list {
  max-height: calc(var(--article-row-h) * 4 + 8px);
  overflow: auto;
}

/* Tighter list feel at this height */
.paper-articles__list .article-item {
  min-height: var(--article-row-h);
  display: grid;
  grid-template-columns: 10px 1fr;
  gap: 10px;
  align-items: center;
  padding: 10px 6px;
  border-bottom: 1px solid var(--snqr-border);
}
.paper-articles__list .article-item:last-child { border-bottom: none; }

/* Responsive adjustments */
@media (max-width: 1199.98px){
  .paper-articles { --paper-articles-h: 480px; }
}
@media (max-width: 991.98px){
  /* Stack vertically on tablets/phones; let height be natural */
  .paper-articles { --paper-articles-h: auto; }
  .paper-articles__parent,
  .paper-articles__listbox { min-height: initial; }
  .paper-articles__parent .card__media { height: auto; aspect-ratio: 16/9; }
  /* Keep list showing 4 rows max even on mobile */
  .paper-articles__list { max-height: calc(var(--article-row-h) * 4 + 8px); }
}


:root { --snqr-panel-solid: #1b1427; } /* same family as section boxes */
.modal-content { background-color: var(--snqr-panel-solid) !important; color:#fff !important; backdrop-filter:none !important; }
.modal-header, .modal-footer { border-color: var(--snqr-border) !important; }
